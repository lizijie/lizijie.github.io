---
layout: post
title: 整理常用linux命令
key: 202206262100
tags: linux
---

纯以记录为目的，以便日后翻查或者重新理解命令使用方法<br>

# linux

## 文件

递归子目录，并将以`.mp3`为后缀的文件，并复制了上层目录my_mp3_dir<br>
`find . -iregex ".*\.mp3.*" -exec cp {} ../my_mp3_dir/ \;`

按文件大到小排序<br>
`ls -lhS`

搜索包含ERROR或WARN或lua异常栈的日志<br>
`grep --perl-regex -n "WARN|ERR|stack traceback:|\t+" *`

打印目录文件大小<br>
`du -sh *`

file命令查看文件类型<br>
* file动态库文件样例
```
file libnss1_files-2.2.4.so
libnss1_files-2.2.4.so: ELF 32-bit LSB shared object,Intel80386, version 1,not stripped
```

* file执行程序文件样例
```
file test
test: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID[sha1]=2514daeb6c3a3db099cdc45e0b8936bd0f9f8388, for GNU/Linux 3.2.0, not stripped
```

* file代码文件样例
```
file test.cpp
test.cpp: C source, ASCII text, with CRLF line terminators
```

## 网络

查看指定进程ID打开的UDP和TCP网络端口<br>
`ss -anplut | grep PID`

扫描tcp端口<br>
`nc -v 127.0.0.1 6789`

扫描udp端口<br>
`nc -vu 127.0.0.1 6789`

查询被占用的网络端口<br>
通过进程ID，查看监听的网络端口<br>
`netstat -lnp|grep PID`

通过进程ID，查看所有监听的网络端口<br>
`netstat -apn | grep PID`

显示处于监听状态的Tcp的端口信息<br>
`netstat -tlp`

显示处于监听状态的udp的端口信息<br>
`netstat -ulp`

显示处于监听状态的tcp、udp的端口信息<br>
`netstat -tulp`

将远端192.168.0.20用户xxx下的/home/xxx/test文件，复制到当前目录<br>
`scp xxx@192.168.0.20:/home/xxx/test ./`

将当前目录test文件，复制到远端192.168.0.20用户xxx下的/home/xxx/<br>
`scp ./test xxx@192.168.0.20:/home/xxx/`


## 性能监控

监察当前目录日志文件的写入变化<br>
`watch -n 1 -d 'ls -lS'`

## 进程

根据搜索关键词找出进程ID<br>
`ps aux|grep "KEY WORLD"|grep -v grep|awk '{print $2}'`

查看子进程依赖<br>
`ps -ef --forest`

查看线程信息<br>
`ps -Lf PID`

## 其它

将变量数值$name输出到模板脚本my.sh<br>
```shell
name="world"
cat > my.sh << EOF
echo "hello $name"
EOF

cat my.sh
echo "hello world"
```

查看系统版本信息<br>
cat /proc/version

切换命令前/后台<br>
ctrl+z将当前命令切换到后台<br>
fg命令将最近一次切到的台台的命令，切回前台<br>


# window

打出window subsystem子系统目录
`\\wsl$`



<br> 
<br> 
<b>原文:<br>
<https://lizijie.github.io/2022/06/26/%E6%95%B4%E7%90%86%E5%B8%B8%E7%94%A8linux%E5%91%BD%E4%BB%A4.html>
<br>
作者github:<br>
<https://github.com/lizijie>
</b>
